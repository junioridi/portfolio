{"ast":null,"code":"var queryString = require('query-string');\n\nvar History = require('./html5-history/index');\n\nvar _ = require('underscore');\n\nvar state = {};\nvar router = exports;\n\nrouter.route = function route(path, params, title) {\n  state.path = path || state.path || router.getPath();\n  state.params = params || state.params || {};\n  state.title = title || state.title || '';\n  var search = '';\n\n  if (!_.isEmpty(state.params)) {\n    search = '?' + queryString.stringify(state.params);\n  }\n\n  History.pushState(state.params, state.title, state.path + search);\n};\n\nvar currentHandlers = [];\nHistory.Adapter.bind(window, 'statechange', function () {\n  state.path = router.getPath();\n  state.params = router.getParams();\n  state.title = router.getTitle();\n\n  _.each(currentHandlers, function (handler) {\n    handler(state.path, state.params, state.title);\n  });\n});\n\nrouter.onRoute = function (handler) {\n  currentHandlers = _.union(currentHandlers, handler);\n};\n\nrouter.offRoute = function (handler) {\n  currentHandlers = _.without(currentHandlers, handler);\n};\n\nrouter.getPath = function getPath() {\n  var path = window.location.pathname;\n  return path;\n};\n\nrouter.setPath = function setPath(path) {\n  router.route(path, state.params, state.title);\n};\n\nrouter.getTitle = function getTitle() {\n  var title = window.document.title;\n  return title;\n};\n\nrouter.setTitle = function setTitle(title) {\n  window.document.title = state.title = title;\n};\n\nrouter.getParams = function getParams() {\n  var params = queryString.parse(window.location.search);\n  return params;\n};\n\nrouter.getParam = function getParam(paramName) {\n  var params = router.getParams();\n\n  if (!_.contains(_.keys(params), paramName)) {\n    // we should check for this because sometimes there is random stuff on the object prototype\n    return;\n  }\n\n  var param = params[paramName];\n  return param;\n};\n\nrouter.setParams = function setParams(params) {\n  router.route(state.path, params, state.title);\n};\n\nrouter.hasParam = function hasParam(paramName) {\n  var param = router.getParam(paramName);\n  if (_.isUndefined(param)) return false;else return true;\n};\n\nrouter.setParam = function setParam(paramName, value) {\n  if (_.isUndefined(value)) value = null;\n  var params = router.getParams();\n  params[paramName] = value;\n  router.setParams(params);\n};\n\nrouter.removeParam = function removeParam(paramName) {\n  var params = router.getParams();\n  delete params[paramName];\n  router.setParams(params);\n};\n\nrouter.toggleParam = function toggleParam(paramName, value) {\n  if (router.hasParam(paramName)) {\n    router.removeParam(paramName);\n  } else {\n    router.setParam(paramName, value);\n  }\n};","map":{"version":3,"sources":["/home/junior/work/backbone/store-track/node_modules/browser-router/browser-router.js"],"names":["queryString","require","History","_","state","router","exports","route","path","params","title","getPath","search","isEmpty","stringify","pushState","currentHandlers","Adapter","bind","window","getParams","getTitle","each","handler","onRoute","union","offRoute","without","location","pathname","setPath","document","setTitle","parse","getParam","paramName","contains","keys","param","setParams","hasParam","isUndefined","setParam","value","removeParam","toggleParam"],"mappings":"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","sourcesContent":["var queryString = require('query-string');\nvar History = require('./html5-history/index');\nvar _ = require('underscore');\n\nvar state = {};\n\nvar router = exports;\n\nrouter.route = function route(path, params, title) {\n  state.path = path || state.path || router.getPath();\n  state.params = params || state.params || {};\n  state.title = title || state.title || '';\n  var search = '';\n  if (!_.isEmpty(state.params)) {\n    search = '?' + queryString.stringify(state.params);\n  }\n  History.pushState(state.params, state.title, state.path + search);\n}\n\n\nvar currentHandlers = [];\n\nHistory.Adapter.bind(window, 'statechange', function() {\n  state.path = router.getPath();\n  state.params = router.getParams();\n  state.title = router.getTitle();\n  _.each(currentHandlers, function(handler) {\n    handler(state.path, state.params, state.title);\n  });\n});\n\nrouter.onRoute = function(handler) {\n  currentHandlers = _.union(currentHandlers, handler);\n}\n\nrouter.offRoute = function(handler) {\n  currentHandlers = _.without(currentHandlers, handler);\n}\n\nrouter.getPath = function getPath() {\n  var path = window.location.pathname;\n  return path;\n}\n\nrouter.setPath = function setPath(path) {\n  router.route(path, state.params, state.title);\n}\n\nrouter.getTitle = function getTitle() {\n  var title = window.document.title;\n  return title;\n}\n\nrouter.setTitle = function setTitle(title) {\n  window.document.title = state.title = title;\n}\n\nrouter.getParams = function getParams() {\n  var params = queryString.parse(window.location.search);\n  return params;\n}\n\nrouter.getParam = function getParam(paramName) {\n  var params = router.getParams();\n  if (!_.contains(_.keys(params), paramName)) {\n    // we should check for this because sometimes there is random stuff on the object prototype\n    return;\n  }\n  var param = params[paramName];\n  return param;\n}\n\nrouter.setParams = function setParams(params) {\n  router.route(state.path, params, state.title);\n}\n\nrouter.hasParam = function hasParam(paramName) {\n  var param = router.getParam(paramName);\n  if (_.isUndefined(param)) return false;\n  else return true;\n}\n\nrouter.setParam = function setParam(paramName, value) {\n  if (_.isUndefined(value)) value = null;\n  var params = router.getParams();\n  params[paramName] = value;\n  router.setParams(params);\n}\n\nrouter.removeParam = function removeParam(paramName) {\n  var params = router.getParams();\n  delete params[paramName];\n  router.setParams(params);\n}\n\nrouter.toggleParam = function toggleParam(paramName, value) {\n  if (router.hasParam(paramName)) {\n    router.removeParam(paramName);\n  } else {\n    router.setParam(paramName, value);\n  }\n}\n"]},"metadata":{},"sourceType":"script"}