{"ast":null,"code":"/**\n * History.js Native Adapter\n * @author Benjamin Arthur Lupton <contact@balupton.com>\n * @copyright 2010-2011 Benjamin Arthur Lupton <contact@balupton.com>\n * @license New BSD License <http://creativecommons.org/licenses/BSD/>\n */\n// Add the Adapter\nvar Adapter = module.exports = {\n  /**\n   * History.Adapter.handlers[uid][eventName] = Array\n   */\n  handlers: {},\n\n  /**\n   * History.Adapter._uid\n   * The current element unique identifier\n   */\n  _uid: 1,\n\n  /**\n   * History.Adapter.uid(element)\n   * @param {Element} element\n   * @return {String} uid\n   */\n  uid: function (element) {\n    return element._uid || (element._uid = Adapter._uid++);\n  },\n\n  /**\n   * History.Adapter.bind(el,event,callback)\n   * @param {Element} element\n   * @param {String} eventName - custom and standard events\n   * @param {Function} callback\n   * @return\n   */\n  bind: function (element, eventName, callback) {\n    // Prepare\n    var uid = Adapter.uid(element); // Apply Listener\n\n    Adapter.handlers[uid] = Adapter.handlers[uid] || {};\n    Adapter.handlers[uid][eventName] = Adapter.handlers[uid][eventName] || [];\n    Adapter.handlers[uid][eventName].push(callback); // Bind Global Listener\n\n    element['on' + eventName] = function (element, eventName) {\n      return function (event) {\n        Adapter.trigger(element, eventName, event);\n      };\n    }(element, eventName);\n  },\n\n  /**\n   * History.Adapter.trigger(el,event)\n   * @param {Element} element\n   * @param {String} eventName - custom and standard events\n   * @param {Object} event - a object of event data\n   * @return\n   */\n  trigger: function (element, eventName, event) {\n    // Prepare\n    event = event || {};\n    var uid = Adapter.uid(element),\n        i,\n        n; // Apply Listener\n\n    Adapter.handlers[uid] = Adapter.handlers[uid] || {};\n    Adapter.handlers[uid][eventName] = Adapter.handlers[uid][eventName] || []; // Fire Listeners\n\n    for (i = 0, n = Adapter.handlers[uid][eventName].length; i < n; ++i) {\n      Adapter.handlers[uid][eventName][i].apply(this, [event]);\n    }\n  },\n\n  /**\n   * History.Adapter.extractEventData(key,event,extra)\n   * @param {String} key - key for the event data to extract\n   * @param {String} event - custom and standard events\n   * @return {mixed}\n   */\n  extractEventData: function (key, event) {\n    var result = event && event[key] || undefined;\n    return result;\n  },\n\n  /**\n   * History.Adapter.onDomLoad(callback)\n   * @param {Function} callback\n   * @return\n   */\n  onDomLoad: function (callback) {\n    var timeout = window.setTimeout(function () {\n      callback();\n    }, 2000);\n\n    window.onload = function () {\n      clearTimeout(timeout);\n      callback();\n    };\n  }\n};","map":{"version":3,"sources":["/home/junior/work/backbone/store-track/node_modules/browser-router/html5-history/adapter.js"],"names":["Adapter","module","exports","handlers","_uid","uid","element","bind","eventName","callback","push","event","trigger","i","n","length","apply","extractEventData","key","result","undefined","onDomLoad","timeout","window","setTimeout","onload","clearTimeout"],"mappings":"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","sourcesContent":["/**\n * History.js Native Adapter\n * @author Benjamin Arthur Lupton <contact@balupton.com>\n * @copyright 2010-2011 Benjamin Arthur Lupton <contact@balupton.com>\n * @license New BSD License <http://creativecommons.org/licenses/BSD/>\n */\n\n// Add the Adapter\nvar Adapter = module.exports = {\n    /**\n     * History.Adapter.handlers[uid][eventName] = Array\n     */\n    handlers: {},\n\n    /**\n     * History.Adapter._uid\n     * The current element unique identifier\n     */\n    _uid: 1,\n\n    /**\n     * History.Adapter.uid(element)\n     * @param {Element} element\n     * @return {String} uid\n     */\n    uid: function(element){\n        return element._uid || (element._uid = Adapter._uid++);\n    },\n\n    /**\n     * History.Adapter.bind(el,event,callback)\n     * @param {Element} element\n     * @param {String} eventName - custom and standard events\n     * @param {Function} callback\n     * @return\n     */\n    bind: function(element,eventName,callback){\n        // Prepare\n        var uid = Adapter.uid(element);\n\n        // Apply Listener\n        Adapter.handlers[uid] = Adapter.handlers[uid] || {};\n        Adapter.handlers[uid][eventName] = Adapter.handlers[uid][eventName] || [];\n        Adapter.handlers[uid][eventName].push(callback);\n\n        // Bind Global Listener\n        element['on'+eventName] = (function(element,eventName){\n            return function(event){\n                Adapter.trigger(element,eventName,event);\n            };\n        })(element,eventName);\n    },\n\n    /**\n     * History.Adapter.trigger(el,event)\n     * @param {Element} element\n     * @param {String} eventName - custom and standard events\n     * @param {Object} event - a object of event data\n     * @return\n     */\n    trigger: function(element,eventName,event){\n        // Prepare\n        event = event || {};\n        var uid = Adapter.uid(element),\n            i,n;\n\n        // Apply Listener\n        Adapter.handlers[uid] = Adapter.handlers[uid] || {};\n        Adapter.handlers[uid][eventName] = Adapter.handlers[uid][eventName] || [];\n\n        // Fire Listeners\n        for ( i=0,n=Adapter.handlers[uid][eventName].length; i<n; ++i ) {\n            Adapter.handlers[uid][eventName][i].apply(this,[event]);\n        }\n    },\n\n    /**\n     * History.Adapter.extractEventData(key,event,extra)\n     * @param {String} key - key for the event data to extract\n     * @param {String} event - custom and standard events\n     * @return {mixed}\n     */\n    extractEventData: function(key,event){\n        var result = (event && event[key]) || undefined;\n        return result;\n    },\n\n    /**\n     * History.Adapter.onDomLoad(callback)\n     * @param {Function} callback\n     * @return\n     */\n    onDomLoad: function(callback) {\n        var timeout = window.setTimeout(function(){\n            callback();\n        },2000);\n        window.onload = function(){\n            clearTimeout(timeout);\n            callback();\n        };\n    }\n};\n"]},"metadata":{},"sourceType":"script"}